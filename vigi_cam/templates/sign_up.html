{% load static %}
<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Registrar Admin</title>
    <link rel="stylesheet" href="{% static "css/sign up.css" %}" />
    <link rel="shortcut icon" href="{% static "images/favicon.ico" %}" type="image/x-icon">
  </head>
  <body>
    <div class="container">
      <div class="grid">
        <!-- Left side - 3D Visualization -->
        <div class="visualization">
          <div class="cylinder">
            <div class="cylinder-inner"></div>

            <!-- Floating icons -->
            <div class="floating-icon top-left">
              <div class="icon-wrapper blue">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10" />
                </svg>
              </div>
            </div>
            <div class="floating-icon top-right">
              <div class="icon-wrapper orange">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path
                    d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1-2.5-2.5Z"
                  />
                  <path d="M8 7h6" />
                  <path d="M8 11h8" />
                  <path d="M8 15h6" />
                </svg>
              </div>
            </div>
            <div class="floating-icon bottom-left">
              <div class="icon-wrapper gray">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path
                    d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"
                  />
                  <polyline points="14 2 14 8 20 8" />
                </svg>
              </div>
            </div>
            <div class="floating-icon bottom-right">
              <div class="icon-wrapper red">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path
                    d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"
                  />
                  <circle cx="12" cy="12" r="3" />
                </svg>
              </div>
            </div>
            <div class="floating-icon middle-right">
              <div class="icon-wrapper green">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <rect width="20" height="14" x="2" y="3" rx="2" />
                  <line x1="8" x2="16" y1="21" y2="21" />
                  <line x1="12" x2="12" y1="17" y2="21" />
                </svg>
              </div>
            </div>
          </div>
        </div>

        <!-- Right side - Login Form -->
        <div class="login-form">
          <div class="form-header">
            <h1>Bienvenido</h1>
          </div>

          <div class="form-content">
            <div class="info-message">
              {{ error }}
            </div>

            <form id="loginForm" method="post" action="{% url "registrarAdminFirstTime" %}">
              {% csrf_token %} 
              <input type="hidden" name="next" value="{{ next }}">
              <div class="form-group">
                <input
                  type="text"
                  placeholder="Nombre del Adminisrador"
                  required
                  name="username"
                  id="id_username"
                />
              </div>

              <div class="form-group password-group">
                <input
                  type="password"
                  placeholder="Contraseña"
                  required
                  name="password1"
                  id="id_password1"
                />
                <button type="button" class="toggle-password">
                  <svg
                    class="eye-icon"
                    xmlns="http://www.w3.org/2000/svg"
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z" />
                    <circle cx="12" cy="12" r="3" />
                  </svg>
                  <svg
                    class="eye-off-icon hidden"
                    xmlns="http://www.w3.org/2000/svg"
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M9.88 9.88a3 3 0 1 0 4.24 4.24" />
                    <path
                      d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"
                    />
                    <path
                      d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"
                    />
                    <line x1="2" x2="22" y1="2" y2="22" />
                  </svg>
                </button>
              </div>

              <div class="form-group password-group">
                <input
                  type="password"
                  placeholder="Confirmar Contraseña"
                  required
                  name="password2"
                  id="id_password2"
                />
                <button type="button" class="toggle-password">
                  <svg
                    class="eye-icon"
                    xmlns="http://www.w3.org/2000/svg"
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z" />
                    <circle cx="12" cy="12" r="3" />
                  </svg>
                  <svg
                    class="eye-off-icon hidden"
                    xmlns="http://www.w3.org/2000/svg"
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M9.88 9.88a3 3 0 1 0 4.24 4.24" />
                    <path
                      d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"
                    />
                    <path
                      d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"
                    />
                    <line x1="2" x2="22" y1="2" y2="22" />
                  </svg>
                </button>
              </div>
              <button type="submit" class="login-button">Registrar</button>
            </form>

            <p class="footer-text">
              Al utilizar el procutco respete las leyes y normativas pertinetes
            </p>
          </div>
        </div>
      </div>
    </div>    
<!-- Success Dialog -->
<div class="dialog-overlay" id="successDialog">
  <div class="success-dialog">
    <div class="success-icon">✓</div>
    <h2>¡Registro Exitoso!</h2>
    <p>Su cuenta ha sido creada correctamente.</p>
    <button onclick="closeSuccessDialog()">Aceptar</button>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const successDialog = document.getElementById('successDialog');
    // Verificar si hay un mensaje flash relacionado con "Registro exitoso"
    const successMessage = "{{ messages|default_if_none:'' }}".trim();
    if (successMessage === "Registro exitoso") {
      successDialog.classList.add('active');
      setTimeout(() => {
        window.location.href = "{% url 'index' %}"; // Redirigir al índice
      }, 3000); // Esperar 3 segundos antes de redirigir
    }
  });

  function closeSuccessDialog() {
    const successDialog = document.getElementById('successDialog');
    successDialog.classList.remove('active');
    window.location.href = "{% url 'index' %}";
  }
</script>

    <script src="{% static "js/sign up.js" %}"></script>
  </body>
</html>
